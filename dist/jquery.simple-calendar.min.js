!function(e,t,n,a){"use strict";var s="simpleCalendar",i={months:["january","february","march","april","may","june","july","august","september","october","november","december"],days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],minDate:"YYYY-MM-DD",maxDate:"YYYY-MM-DD",insertEvent:!0,displayEvent:!0,fixedStartDay:!0,events:[],eventsInfo:[],selectCallback:function(e){},insertCallback:function(){}};function r(t,n){this.element=t,this.settings=e.extend({},i,n),this._defaults=i,this._name=s,this.currentDate=new Date,this.events=n.events,this.init()}e.extend(r.prototype,{init:function(){var t=e(this.element),n=this.currentDate,a=(this.events,e('<div class="calendar"></div>')),s=e('<header><h2 class="month"></h2><h4 class="month year"></h4><a class="btn btn-prev" href="#"><</a><a class="btn btn-next" href="#">></a></header>');this.updateHeader(n,s),a.append(s),this.buildCalendar(n,a),t.append(a),this.bindEvents()},updateHeader:function(e,t){t.find(".month").html(this.settings.months[e.getMonth()]),t.find(".year").html(e.getFullYear())},testFunction:function(e){console.log("test function var = "+e)},buildCalendar:function(t,n){var a=this;n.find("table").remove();for(var s=e("<table></table>"),i=e("<thead></thead>"),r=e("<tbody></tbody>"),d=1;d<=this.settings.days.length;d++)i.append(e("<td>"+this.settings.days[d%7].substring(0,3)+"</td>"));for(var l=t.getFullYear(),o=t.getMonth(),c=new Date(l,o,1);1!=c.getDay();)c.setDate(c.getDate()-1);for(var h=new Date(l,o+1,0);0!=h.getDay();)h.setDate(h.getDate()+1);for(var f=(new Date).toDateString(),u=c;u<=h;u.setDate(u.getDate())){var v=e("<tr></tr>");for(d=0;d<7;d++){var p=e('<td><a href="#" class="day" data-date="'+this.formatToYYYYMMDD(u)+'">'+u.getDate()+"</a></td>");if(a.settings.displayEvent){const t=e.inArray(this.formatToYYYYMMDD(u),a.events);-1!==t&&(console.log("found event"),p.find(".day").addClass("event"),p.find(".day").attr("data-tippy-content",a.settings.eventsInfo[t]))}u.toDateString()===f&&p.find(".day").addClass("today"),u.getMonth()!=t.getMonth()&&p.find(".day").addClass("wrong-month"),v.append(p),u.setDate(u.getDate()+1)}r.append(v)}r.on("click",".day",function(t){var n=e(t.currentTarget).attr("data-date");if(console.log(n),a.settings.selectCallback(n),e(t.currentTarget).hasClass("event")){a.fillUp(e(a.element),t.pageX,t.pageY);const s=e.inArray(n,a.events);e(a.element).find(".event-container>.event-date").text(n),e(a.element).find(".event-container>.title").text(a.settings.eventsInfo[s])}t.preventDefault()}),s.append(i),s.append(r);var g=e('<div class="event-container"><p class="event-date">Mar 01, 2019</p><h2 class="title">Event Name</h2><a href="#" class="close"></div>');g.on("click",".close",function(t){a.empty(e(a.element),t.pageX,t.pageY),t.preventDefault()}),n.append(s),n.append(g)},bindEvents:function(){var t=this;e(".btn-prev").click(function(n){t.currentDate.setMonth(t.currentDate.getMonth()-1),t.buildCalendar(t.currentDate,e(t.element).find(".calendar")),t.updateHeader(t.currentDate,e(t.element).find(".calendar header")),n.preventDefault()}),e(".btn-next").click(function(n){t.currentDate.setMonth(t.currentDate.getMonth()+1),t.buildCalendar(t.currentDate,e(t.element).find(".calendar")),t.updateHeader(t.currentDate,e(t.element).find(".calendar header")),n.preventDefault()})},fillUp:function(t,n,a){var s=this,i=t.offset(),r=e('<div class="filler" style=""></div>');r.css("left",n-i.left),r.css("top",a-i.top),e(s.element).find(".calendar").append(r),r.animate({width:"300%",height:"300%"},500,function(){e(s.element).find(".event-container").show(),r.hide()})},empty:function(t,n,a){t.offset();var s=e(".filler");s.css("width","300%"),s.css("height","300%"),s.show(),e(this.element).find(".event-container").hide(),s.animate({width:"0%",height:"0%"},500,function(){s.remove()})},formatToYYYYMMDD:function(e){var t=new Date(e),n=""+t.getDate(),a=""+(t.getMonth()+1),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}}),e.fn[s]=function(t){return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new r(this,t))})}}(jQuery,window,document);